(this["webpackJsonpglobal-widget-manager"]=this["webpackJsonpglobal-widget-manager"]||[]).push([[0],{138:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(18),o=n.n(i),c=(n(90),n(14)),l=(n(67),n(54)),u=n(44),d=n(142),s=(n(91),n(158)),p=n(76),m=n(152),h=n(140),f=n(141),g=function(e){return{type:"HIDE_WINDOW",payload:{id:e}}},w=function(e){return{type:"SHOW_WINDOW",payload:{id:e}}},E=function(e){return{type:"TOGGLE_SETTINGS",payload:{showing:e}}},v=function(e){return{type:"UPDATE_INDEX",payload:{id:e}}},b=n(13);var O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return function(i){return Object(b.b)(e,t,n,Object(l.a)({},a,{forwardRef:!0}))(r.a.forwardRef(i))}}(null,{hideWindow:g,updateIndex:v,minimizeWindow:function(e){return{type:"MINIMIZE_WINDOW",payload:{id:e}}}})((function(e){var t=e.title,n=e.width,i=e.height,o=e.url,l=e.id,g=e.children,w=e.minimized,E=e.updateIndex,v=e.hideWindow,b=e.minimizeWindow,O=e.zIndex,y=Object(a.useRef)(),j=Object(a.useRef)(),W=Object(a.useRef)(),I=Object(a.useRef)(),N=Object(a.useState)({width:n,height:i}),x=Object(c.a)(N,2),k=x[0],R=x[1],z=Object(a.useState)(!0),D=Object(c.a)(z,2),S=D[0],T=D[1],_=Object(a.useState)({pointerEvents:"none",top:0,position:"absolute",zIndex:O,width:"".concat(n+600,"px"),paddingBottom:"".concat(i+500,"px"),paddingTop:"300px",paddingLeft:"300px"}),C=Object(c.a)(_,2),L=C[0],F=C[1],M=Object(a.useState)(!1),B=Object(c.a)(M,2),G=B[0],X=B[1],U=Object(a.useRef)(!1),H=Object(a.useRef)(!0),A=Object(a.useRef)({}),P=Object(a.useRef)(),Y=Object(a.useRef)(),V=Object(a.useRef)(),J=Object(a.useRef)(),Z=Object(a.useRef)(0),q=Object(a.useRef)(0),$=Object(a.useRef)(!1);Object(a.useEffect)((function(){H.current?H.current=!1:G?(F((function(e){return s.a(e,{transform:"none",top:50,width:"100%",height:"calc(100% - 30px)",paddingBottom:0,paddingTop:0,paddingLeft:0})})),j.current.style.width="100%",W.current.style.width="100%",Q(0,0)):(console.log("current is",P.current,",",Y.current),Q(P.current,Y.current),F((function(e){return s.a(e,{top:0,height:null,position:"absolute",width:"".concat(n+600,"px"),paddingBottom:"".concat(i+500,"px"),paddingTop:"300px",paddingLeft:"300px"})})))}),[G]),Object(a.useEffect)((function(){F((function(e){return s.a(e,{zIndex:O})}))}),[O]),Object(a.useEffect)((function(){F(w?function(e){return s.a(e,{display:"none"})}:function(e){return s.a(e,{display:"block"})})}),[w]),Object(a.useEffect)((function(){Q(0,0),window.addEventListener("resize",(function(){U.current&&R({width:window.parent.innerWidth,height:window.parent.innerHeight-137})}))}),[]);var K=function(e){$.current&&!G&&(ee(e),"touchmove"===e.type?(P.current=e.touches[0].clientX-V.current,Y.current=e.touches[0].clientY-J.current):(P.current=e.clientX-V.current,Y.current=e.clientY-J.current),Z.current=P.current,q.current=Y.current,Q(P.current,Y.current))},Q=function(e,t){I.current.style.transform="translate3d("+e+"px, "+t+"px, 0)"},ee=function(e){return e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1,!1};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"frame",onMouseMove:K,style:L,ref:I},r.a.createElement("div",{className:"frame-border",style:m.a(p.a("paddingTop",4),p.a("paddingLeft",4),p.a("paddingRight",4),p.a("width",G?h.a("width",L):null),p.a("top",null),p.a("paddingBottom","".concat(i+5,"px")),p.a("pointerEvents","auto"))(L)},r.a.createElement("div",{onMouseDown:function(e){$.current=!0,e.stopPropagation(),"touchstart"===e.type?(V.current=e.touches[0].clientX-Z.current,J.current=e.touches[0].clientY-q.current):(V.current=e.clientX-Z.current,J.current=e.clientY-q.current),E(l),F(p.a("pointerEvents","auto",L))},onMouseUp:function(e){V.current=P.current,J.current=Y.current,$.current=!1,ee(e),F(p.a("pointerEvents","none",L))},ref:W,onMouseMove:K,className:"topbar",style:{width:"".concat(k.width,"px")}},r.a.createElement(u.a,{onMouseDown:function(e){ee(e)},onClick:function(){v(l)},className:"hover",size:21}),G?r.a.createElement(u.c,{className:"hover",size:21,onClick:function(){U.current=!1,X(!G),R({width:A.current.width,height:A.current.height})}}):r.a.createElement(u.b,{onClick:function(){U.current=!0,A.current={width:k.width,height:k.height},X(!G),R({width:window.parent.innerWidth-7,height:window.parent.innerHeight-137})},className:"hover",size:21}),r.a.createElement(u.d,{onClick:function(){b(l)},className:"hover",size:21}),r.a.createElement("h5",{className:"float-right"},t)),r.a.createElement("div",{className:"window",ref:j,style:{width:"".concat(k.width,"px"),height:"".concat(k.height,"px"),pointerEvents:f.a("pointerEvents","auto",L)?"none":"auto"}},g&&g,S&&!g&&r.a.createElement(d.a,{size:"lg",animation:"border",variant:"secondary",className:"frameloading"}),!g&&r.a.createElement("iframe",{ref:y,onLoad:function(){return T(!1)},frameBorder:"0",title:t,src:o,className:"framestyle",height:"".concat(k.height,"px"),width:"".concat(k.width,"px")})))))})),y=n(150),j=n(81),W=n(153),I=n(143),N=n(31),x=Object(b.b)((function(e){return e}),{showWindow:w,toggleShowing:E})((function(e){var t=e.windows,n=e.showWindow,a=e.toggleShowing;return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"header-apps-button"},r.a.createElement(y.a,null,r.a.createElement(y.a.Toggle,{variant:"secondary",id:"dropdown-basic"},"Apps"),r.a.createElement(y.a.Menu,null,m.a(W.a((function(e){var a=Object(c.a)(e,2),i=(a[0],a[1]);return r.a.createElement(y.a.Item,{key:i,onClick:function(){return n(i)}},h.a("title",h.a(i,t.apps)))})),I.a)(N.a(t.apps))))),r.a.createElement("div",{className:"header-logo"},r.a.createElement("span",null,"GWM")),r.a.createElement("div",{className:"header-apps-button"},r.a.createElement(j.a,{onClick:function(){return a(!0)},variant:"secondary"},"Settings")))})),k=n(156),R=n(53),z=n(155),D=n(34),S=n(151),T=n(154),_=Object(b.b)(null,{createWindow:function(e,t,n,a,r,i){return{type:"CREATE_WINDOW",payload:{id:e,title:t,width:n,height:a,url:r,showing:i}}}})((function(e){var t=e.createWindow,n=Object(a.useRef)(),i=Object(a.useRef)(),o=Object(a.useRef)(),l=Object(a.useState)(!1),u=Object(c.a)(l,2),d=u[0],s=u[1],p=Object(a.useState)(!1),m=Object(c.a)(p,2),h=m[0],f=m[1],g=Object(a.useState)(!1),w=Object(c.a)(g,2),E=w[0],b=w[1];return r.a.createElement(S.a,{className:"p-5"},r.a.createElement(S.a.Group,null,r.a.createElement(S.a.Label,null,"Widget ID"),r.a.createElement(S.a.Control,{ref:o,placeholder:"Widget ID",isInvalid:h,onChange:function(e){return f(!1)}}),r.a.createElement(S.a.Control.Feedback,{type:"invalid"},"ID cannot be empty or a duplicate")),r.a.createElement(S.a.Group,null,r.a.createElement(S.a.Label,null,"Widget Title"),r.a.createElement(S.a.Control,{ref:n,placeholder:"Widget Title Name",isInvalid:d,onChange:function(e){return s(!1)}}),r.a.createElement(S.a.Control.Feedback,{type:"invalid"},"Title cannot be empty")),r.a.createElement(S.a.Group,null,r.a.createElement(S.a.Label,null,"Widget URL"),r.a.createElement(S.a.Control,{ref:i,placeholder:"Widget URL",required:!0,isInvalid:E,onChange:function(e){return b(!1)}}),r.a.createElement(S.a.Control.Feedback,{type:"invalid"},"URL cannot be empty")),r.a.createElement(j.a,{variant:"secondary",onClick:function(e){var a=!1;T.a(o.current.value)&&(f(!0),a=!0),T.a(n.current.value)&&(s(!0),a=!0),T.a(i.current.value)&&(b(!0),a=!0),a?console.log("error"):(t(o.current.value,n.current.value,800,500,i.current.value,!0),v(o.current.value))}},"Submit"))})),C=n(149),L=n(82),F=n.n(L),M=n(51),B=n(43),G=n(144),X=n(145),U=[{dataField:"id",text:"ID"},{dataField:"title",text:"Title"},{dataField:"url",text:"URL"},{dataField:"link",text:"Link",align:"center",editable:!1,formatter:function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{variant:"secondary",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(M.b,{size:20})))}}];var H=Object(b.b)((function(e){var t=R.a(["windows","apps"],e);if(B.a(t))return e;var n=m.a(G.a,W.a((function(e){return e})))(t);return X.a(["windows","apps"],n,e)}),{toggleShowing:E})((function(e){var t=e.windows,n=e.settings,a=e.toggleShowing,i=function(){return a(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{show:n.showing,onHide:i,backdrop:"static",keyboard:!1,size:"lg",variant:"secondary"},r.a.createElement(C.a.Header,{closeButton:!0},r.a.createElement(C.a.Title,null,"Settings")),r.a.createElement(C.a.Body,null,r.a.createElement(F.a,{keyField:"id",data:t.apps,columns:U})),r.a.createElement(C.a.Footer,null,r.a.createElement(j.a,{variant:"secondary",onClick:i},"Close"),r.a.createElement(j.a,{variant:"primary"},"Save"))))})),A=n(146),P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return function(i){return Object(b.b)(e,t,n,Object(l.a)({},a,{forwardRef:!0}))(r.a.forwardRef(i))}}((function(e){return e}),null)((function(e,t){var n=e.windows,a=e.children,i=e.id;return r.a.createElement(r.a.Fragment,null,A.a(["apps",i,"showing"],!0,n)&&r.a.createElement(O,{title:R.a(["apps",i,"title"],n),id:R.a(["apps",i,"id"],n),width:R.a(["apps",i,"width"],n),ref:t,height:R.a(["apps",i,"height"],n),zIndex:z.a(D.a(i))(h.a("order",n)),minimized:R.a(["apps",i,"minimized"],n)},a))})),Y={addwidget:{id:"addwidget",title:"Add Widget",width:800,height:500,zIndex:0},test:{id:"test",title:"Test App",width:1e3,height:300,zIndex:0}},V=Object(b.b)((function(e){var t=h.a("windows",e);if(!B.a(t)){var n=m.a(G.a,W.a((function(e){return e})))(t);return X.a(["windows","apps"],n,e)}}),{showWindow:w,hideWindow:g})((function(e){var t=e.children,n=e.id,a=e.showWindow,i=e.className,o=e.hideWindow;return r.a.createElement("div",{className:"noselect min-bar "+i,onClick:function(){return a(n)}},r.a.createElement("div",{className:"min-bar-close"}," ",r.a.createElement(M.a,{onClick:function(e){o(n),e.stopPropagation()},size:20})),r.a.createElement("div",{className:"min-bar-title"},t))})),J=function(){var e=Object(a.useState)(0),t=Object(c.a)(e,2),n=t[0],i=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Button has been clicked ",n," times!"),r.a.createElement("button",{onClick:function(){return i(n+1)}},"Click me!"))},Z=Object(b.b)((function(e){return e}))((function(e){var t=e.windows;return r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{windows:t}),r.a.createElement(P,{id:"test"},r.a.createElement(J,null)),r.a.createElement(P,{id:"addwidget"},r.a.createElement(_,null)),m.a(W.a((function(e){var n=Object(c.a)(e,2),a=(n[0],n[1]);if(k.a(a,Y))return null;var i=R.a(["apps",a],t);return f.a("showing",!0,i)&&r.a.createElement(O,{key:i.id,id:i.id,title:i.title,url:i.url,width:i.width,zIndex:z.a(D.a(i.id))(h.a("order",t)),minimized:i.minimized,height:i.height})})),I.a)(N.a(t.apps)),r.a.createElement(H,null),r.a.createElement("div",{className:"footer"},m.a(W.a((function(e){var n=Object(c.a)(e,2),a=n[0],i=n[1],o=R.a(["apps",i],t);return f.a("showing",!0,o)||f.a("minimized",!0,o)?r.a.createElement(V,{className:f.a("minimized",!0,o)?"":"showing",key:a,id:i},h.a("title",o)):null})),I.a)(N.a(t.apps))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var q=n(30),$=n(147),K=n(157),Q=n(148),ee={apps:Y,order:[]},te={showing:!1},ne=Object(q.b)({windows:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_WINDOW":var n=t.payload.id,a=z.a(D.a(n))(h.a("order",e)),r=function(t){return $.a(t,0)?p.a("order",K.a(n,Q.a(t,1,h.a("order",e))),e):p.a("order",K.a(n,h.a("order",e)),e)};return m.a(X.a(["apps",n,"showing"],!0),X.a(["apps",n,"minimized"],!1),p.a("order",h.a("order",r(a))))(e);case"HIDE_WINDOW":var i=t.payload.id,o=z.a(D.a(i))(h.a("order",e));return m.a(p.a("order",Q.a(o,1,h.a("order",e))),X.a(["apps",i,"showing"],!1),X.a(["apps",i,"minimized"],!1))(e);case"CREATE_WINDOW":var c={id:t.payload.id,title:t.payload.title,width:t.payload.width,height:t.payload.height,url:t.payload.url,showing:!0,zIndex:1};return X.a(["apps",t.payload.id],c,e);case"UPDATE_INDEX":var l=t.payload.id,u=z.a(D.a(l))(h.a("order",e)),d=function(t){return $.a(t,0)?p.a("order",K.a(l,Q.a(t,1,h.a("order",e))),e):p.a("order",K.a(l,h.a("order",e)),e)};return d(u);case"MINIMIZE_WINDOW":var s=t.payload.id;return m.a(X.a(["apps",s,"minimized"],!0))(e);default:return e}},settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_SETTINGS":var n=t.payload.showing;return p.a("showing",n,e);default:return e}}}),ae=Object(q.c)(window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),re=Object(q.d)(ne,ae);o.a.render(r.a.createElement(b.a,{store:re},r.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},67:function(e,t,n){},85:function(e,t,n){e.exports=n(138)},90:function(e,t,n){},91:function(e,t,n){}},[[85,1,2]]]);
//# sourceMappingURL=main.5afd29b5.chunk.js.map